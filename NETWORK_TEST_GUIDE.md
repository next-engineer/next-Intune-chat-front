# 🌐 네트워크 통신 테스트 가이드

## 📋 **테스트 시나리오**

### **시나리오 1: 같은 WiFi 네트워크에서 테스트**
- 두 대의 컴퓨터가 같은 WiFi에 연결
- 한 컴퓨터에서 서버 실행
- 다른 컴퓨터에서 클라이언트 접속

### **시나리오 2: 인터넷을 통한 원격 테스트**
- 한 컴퓨터에서 서버 실행 (포트 포워딩 필요)
- 다른 컴퓨터에서 공인 IP로 접속

## 🚀 **단계별 테스트 방법**

### **1단계: 서버 컴퓨터 설정 (현재 컴퓨터)**

#### **1.1 환경 변수 설정**
```bash
# 네트워크 테스트용 환경 변수 적용
cp env.network-test .env
```

#### **1.2 개발 서버 시작**
```bash
npm run dev
```

#### **1.3 방화벽 설정 확인**
Windows 방화벽에서 포트 5173과 8080 허용:
- 제어판 → Windows Defender 방화벽 → 고급 설정
- 인바운드 규칙 → 새 규칙
- 포트 선택 → TCP → 특정 포트: 5173, 8080
- 연결 허용 선택
- 모든 프로필 선택
- 이름: "Vite Dev Server"

### **2단계: 클라이언트 컴퓨터 설정**

#### **2.1 브라우저에서 접속**
```
http://192.168.12.110:5173
```

#### **2.2 핑퐁 테스트 페이지 접속**
```
http://192.168.12.110:5173/pingpong
```

## 🔧 **환경별 설정**

### **로컬 네트워크 테스트**
```bash
# .env 파일 설정
VITE_API_URL=http://192.168.12.110:8080
VITE_WEBSOCKET_URL=wss://192.168.12.110:8080/ws
```

### **인터넷 원격 테스트**
```bash
# .env 파일 설정 (공인 IP 사용)
VITE_API_URL=http://YOUR_PUBLIC_IP:8080
VITE_WEBSOCKET_URL=wss://YOUR_PUBLIC_IP:8080/ws
```

## 📊 **테스트 체크리스트**

### **연결 테스트**
- [ ] 서버 컴퓨터에서 `npm run dev` 실행
- [ ] 클라이언트에서 `http://192.168.12.110:5173` 접속 가능
- [ ] 핑퐁 페이지에서 연결 상태 확인
- [ ] 웹소켓 연결 상태 표시 확인

### **통신 테스트**
- [ ] 핑퐁 메시지 전송/수신 확인
- [ ] 응답 시간 측정
- [ ] 연결 품질 평가
- [ ] 자동 재연결 테스트

### **다중 클라이언트 테스트**
- [ ] 여러 브라우저에서 동시 접속
- [ ] 각 클라이언트별 연결 상태 확인
- [ ] 실시간 상태 업데이트 확인

## 🛠️ **문제 해결**

### **연결이 안 되는 경우**

#### **1. IP 주소 확인**
```bash
# Windows
ipconfig

# Mac/Linux
ifconfig
```

#### **2. 방화벽 설정 확인**
- Windows 방화벽에서 포트 5173, 8080 허용
- 안티바이러스 프로그램 방화벽 설정 확인

#### **3. 네트워크 연결 확인**
```bash
# 클라이언트에서 서버로 핑 테스트
ping 192.168.12.110
```

#### **4. 포트 사용 확인**
```bash
# Windows
netstat -an | findstr :5173
netstat -an | findstr :8080

# Mac/Linux
netstat -an | grep :5173
netstat -an | grep :8080
```

### **웹소켓 연결 오류**

#### **1. CORS 설정 확인**
백엔드 서버에서 CORS 설정이 올바른지 확인

#### **2. SSL 인증서 문제**
개발 환경에서는 HTTP/WSS 사용, 프로덕션에서는 HTTPS/WSS 사용

#### **3. 프록시 설정 확인**
회사 네트워크나 프록시 환경에서는 추가 설정 필요

## 📱 **모바일 테스트**

### **Android/iOS 브라우저에서 테스트**
```
http://192.168.12.110:5173/pingpong
```

### **모바일 앱에서 테스트**
- React Native 앱에서 웹소켓 연결 테스트
- 네이티브 앱에서 HTTP API 호출 테스트

## 🌍 **인터넷 원격 테스트**

### **포트 포워딩 설정**
1. 공유기 관리 페이지 접속
2. 포트 포워딩 설정
3. 외부 포트 5173 → 내부 IP 192.168.12.110:5173
4. 외부 포트 8080 → 내부 IP 192.168.12.110:8080

### **공인 IP 확인**
```bash
# 공인 IP 확인
curl ifconfig.me
```

### **원격 접속**
```
http://YOUR_PUBLIC_IP:5173
```

## 📈 **성능 모니터링**

### **네트워크 지연 측정**
- 핑퐁 응답 시간 모니터링
- 연결 품질 평가
- 패킷 손실률 확인

### **동시 접속자 테스트**
- 여러 클라이언트에서 동시 접속
- 서버 부하 테스트
- 메모리 사용량 모니터링

## 🔒 **보안 고려사항**

### **개발 환경**
- 로컬 네트워크에서만 테스트
- 방화벽 설정으로 불필요한 포트 차단

### **프로덕션 환경**
- HTTPS/WSS 사용
- 인증 및 권한 설정
- DDoS 방어 설정

## 📞 **추가 도움말**

### **네트워크 도구**
- **Wireshark**: 패킷 분석
- **Postman**: API 테스트
- **WebSocket King**: 웹소켓 테스트

### **브라우저 개발자 도구**
- Network 탭에서 웹소켓 연결 확인
- Console 탭에서 오류 메시지 확인
- Application 탭에서 로컬 스토리지 확인
