import{j as e,h as s}from"./index-BAGu4OjU.js";import{r as a}from"./vendor-BlUkfZh9.js";import{L as t,I as n}from"./intune-input-huUyjFOD.js";import{I as i}from"./intune-button-qLYfBzk1.js";import{U as l,L as r,R as m,a as c,M as d}from"./radio-group-Da7KeSWf.js";import{A as o,a as x,b as h,X as u}from"./x-Cj0Vg3OY.js";import{a as p,A as j}from"./error.api-B9wQa4Rf.js";import{A as g}from"./endPoint.constants-C9KNCxVz.js";import{U as b}from"./user-CuRjii71.js";import{c as f}from"./button-fv1gnQcv.js";import"./router-BuIkA38J.js";import"./index-DoA_IopH.js";import"./utils-C-1G2k3o.js";
/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=f("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),v=async e=>{try{return(await p.post(g.USER.CHECK_EMAIL_DUPLICATE,{email:e})).data}catch(s){throw j.handle(s)}},w=async e=>{try{return(await p.post(g.USER.CHECK_NICKNAME_DUPLICATE,{nickname:e})).data}catch(s){throw j.handle(s)}},k=[{name:"관리자",email:"admin@intune.com",password:"admin",nickname:"admin",gender:"M",address:"서울시 강남구",mbti:"ENTJ",isAdmin:!0},{name:"김테스터",email:"test1@example.com",password:"123456",nickname:"테스터1",gender:"M",address:"서울시 강남구",mbti:"ENFP",isAdmin:!1},{name:"이개발자",email:"test2@example.com",password:"123456",nickname:"개발자2",gender:"F",address:"서울시 서초구",mbti:"INTJ",isAdmin:!1},{name:"박디자이너",email:"test3@example.com",password:"123456",nickname:"디자이너3",gender:"F",address:"서울시 마포구",mbti:"ISFP",isAdmin:!1},{name:"최기획자",email:"test4@example.com",password:"123456",nickname:"기획자4",gender:"M",address:"서울시 종로구",mbti:"ENTP",isAdmin:!1},{name:"정관리자",email:"test5@example.com",password:"123456",nickname:"관리자5",gender:"M",address:"서울시 영등포구",mbti:"ESTJ",isAdmin:!1}];function y(){const[p,j]=a.useState({email:"",password:"",nickname:"",gender:"",address:"",mbti:""}),[g,f]=a.useState({}),[y,C]=a.useState(!1),[A,S]=a.useState(!1),[I,E]=a.useState(null),[M,F]=a.useState(null),[T,U]=a.useState(!1),[L,P]=a.useState(!1),[q,R]=a.useState(""),z=(e,s)=>{j(a=>({...a,[e]:s})),"profileImage"!==e&&g[e]&&f(s=>({...s,[e]:""})),"email"===e&&(C(!1),E(null)),"nickname"===e&&(S(!1),F(null))},D=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),_=e=>e.length>=2&&e.length<=20;return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return p.email?D(p.email)?y?!1===I&&(e.email="사용할 수 없는 이메일입니다."):e.email="이메일 중복 확인을 해주세요.":e.email="올바른 이메일 형식을 입력해주세요.":e.email="이메일을 입력해주세요.",p.password?p.password.length<6&&(e.password="비밀번호는 최소 6자 이상이어야 합니다."):e.password="비밀번호를 입력해주세요.",p.nickname?_(p.nickname)?A?!1===M&&(e.nickname="사용할 수 없는 닉네임입니다."):e.nickname="닉네임 중복 확인을 해주세요.":e.nickname="닉네임은 2~20자 사이로 입력해주세요.":e.nickname="닉네임을 입력해주세요.",p.gender||(e.gender="성별을 선택해주세요."),p.address||(e.address="주소를 입력해주세요."),p.mbti||(e.mbti="MBTI를 선택해주세요."),f(e),0===Object.keys(e).length})())try{const{hash:e,salt:a}=await s(p.password)}catch(a){}},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"회원가입"}),e.jsx("p",{className:"text-subtext",children:"Intune에서 새로운 인연을 만나보세요"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"테스트 유저 선택"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:k.map((s,a)=>e.jsxs("button",{type:"button",onClick:()=>{return j({email:(e=s).email,password:e.password,nickname:e.nickname,gender:e.gender,address:e.address,mbti:e.mbti}),C(!1),S(!1),E(null),F(null),void f({});var e},className:"text-left p-2 bg-white rounded border border-blue-200 hover:bg-blue-100 transition-colors",children:[e.jsx("div",{className:"text-sm font-medium text-blue-900",children:s.name}),e.jsxs("div",{className:"text-xs text-blue-600",children:[s.email," | ",s.nickname," | ",s.mbti]})]},a))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{className:"text-sm font-medium text-gray-900",children:"프로필 이미지"}),e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsxs(o,{className:"w-20 h-20",children:[e.jsx(x,{src:q||"/placeholder.svg"}),e.jsx(h,{children:e.jsx(l,{className:"w-8 h-8 text-gray-400"})})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){j(e=>({...e,profileImage:a}));const e=new FileReader;e.onload=e=>{var s;return R(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(a)}},className:"hidden"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",children:"이미지 선택"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(n,{label:"이메일",type:"email",value:p.email,onChange:e=>z("email",e.target.value),error:g.email,success:!0===I?"사용 가능한 이메일입니다":"",required:!0,placeholder:"example@email.com"})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(p.email)if(D(p.email)){U(!0),f(e=>({...e,email:""}));try{const e=await v(p.email);E(e.isAvailable),C(!0),e.isAvailable||f(e=>({...e,email:"이미 사용 중인 이메일입니다."}))}catch(e){f(s=>({...s,email:e.message||"이메일 중복 확인에 실패했습니다. 다시 시도해주세요."})),E(!1),C(!1)}finally{U(!1)}}else f(e=>({...e,email:"올바른 이메일 형식을 입력해주세요."}));else f(e=>({...e,email:"이메일을 입력해주세요."}))},className:"mt-7",disabled:T,children:T?e.jsx(r,{className:"w-4 h-4 animate-spin"}):y?!0===I?e.jsx(N,{className:"w-4 h-4 text-green-600"}):e.jsx(u,{className:"w-4 h-4 text-red-600"}):"중복확인"})]}),e.jsx(n,{label:"비밀번호",type:"password",value:p.password,onChange:e=>z("password",e.target.value),error:g.password,required:!0,placeholder:"비밀번호를 입력하세요"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(n,{label:"닉네임",value:p.nickname,onChange:e=>z("nickname",e.target.value),error:g.nickname,success:!0===M?"사용 가능한 닉네임입니다":"",required:!0,placeholder:"닉네임을 입력하세요"})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(p.nickname)if(_(p.nickname)){P(!0),f(e=>({...e,nickname:""}));try{const e=await w(p.nickname);F(e.isAvailable),S(!0),e.isAvailable||f(e=>({...e,nickname:"이미 사용 중인 닉네임입니다."}))}catch(e){f(s=>({...s,nickname:e.message||"닉네임 중복 확인에 실패했습니다. 다시 시도해주세요."})),F(!1),S(!1)}finally{P(!1)}}else f(e=>({...e,nickname:"닉네임은 2~20자 사이로 입력해주세요."}));else f(e=>({...e,nickname:"닉네임을 입력해주세요."}))},className:"mt-7",disabled:L,children:L?e.jsx(r,{className:"w-4 h-4 animate-spin"}):A?!0===M?e.jsx(N,{className:"w-4 h-4 text-green-600"}):e.jsx(u,{className:"w-4 h-4 text-red-600"}):"중복확인"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{className:"text-sm font-medium text-gray-900",children:["성별 ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(m,{value:p.gender,onValueChange:e=>z("gender",e),className:"flex space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{value:"M",id:"male"}),e.jsx(t,{htmlFor:"male",children:"남성"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{value:"F",id:"female"}),e.jsx(t,{htmlFor:"female",children:"여성"})]})]}),g.gender&&e.jsx("p",{className:"text-sm text-red-600",children:g.gender})]}),e.jsx(n,{label:"주소",value:p.address,onChange:e=>z("address",e.target.value),placeholder:"우편번호 검색을 통해 입력해주세요",error:g.address,required:!0}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{className:"text-sm font-medium text-gray-900",children:["MBTI ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(d,{value:p.mbti,onChange:e=>z("mbti",e)}),g.mbti&&e.jsx("p",{className:"text-sm text-red-600",children:g.mbti})]}),e.jsx(i,{type:"submit",className:"w-full",size:"lg",children:"회원가입"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-subtext",children:["이미 계정이 있으신가요?"," ",e.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>window.location.href="/signin",children:"로그인"})]})})]})}function C(){return e.jsx("div",{className:"min-h-screen bg-soft flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(y,{})})})}export{C as default};
