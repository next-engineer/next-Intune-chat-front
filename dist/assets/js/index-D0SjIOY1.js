import{u as e,j as s,h as a}from"./index-BAGu4OjU.js";import{r}from"./vendor-BlUkfZh9.js";import{L as t,I as n}from"./intune-input-huUyjFOD.js";import{I as l}from"./intune-button-qLYfBzk1.js";import{U as i,R as d,a as m,M as c,L as o}from"./radio-group-Da7KeSWf.js";import{A as x,a as h,b as u}from"./x-Cj0Vg3OY.js";import{u as g}from"./router-BuIkA38J.js";import{A as j}from"./arrow-left-BQBwd4XL.js";import{c as p}from"./button-fv1gnQcv.js";import{M as w}from"./MainLayout-DI2P5oeC.js";import"./index-DoA_IopH.js";import"./user-CuRjii71.js";import"./shield-CAw7P6Rp.js";import"./users-apdFFGzX.js";
/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=p("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function f(){const p=g(),{user:w,setUser:f}=e(),[y,b]=r.useState({email:"",name:"",nickname:"",gender:"",address:"",mbti:"",currentPassword:"",newPassword:"",confirmPassword:""}),[N,k]=r.useState({}),[P,C]=r.useState(!1),[M,S]=r.useState(!1),[F,_]=r.useState(""),[z,A]=r.useState(!1),[I,q]=r.useState("");r.useEffect(()=>{w&&b(e=>({...e,email:w.email,name:w.name,nickname:w.name,gender:"M",address:"서울시 강남구",mbti:"ENFP"}))},[w]);const D=(e,s)=>{b(a=>({...a,[e]:s})),N[e]&&k(s=>({...s,[e]:""})),I&&q("")},L=()=>{p(-1)};return w?s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[s.jsx(j,{className:"w-4 h-4"}),"뒤로 가기"]})}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};var s,a;return y.email?(s=y.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(e.email="올바른 이메일 형식을 입력해주세요.")):e.email="이메일을 입력해주세요.",y.name?y.name.length<2&&(e.name="이름은 최소 2자 이상이어야 합니다."):e.name="이름을 입력해주세요.",y.nickname?(a=y.nickname).length>=2&&a.length<=20||(e.nickname="닉네임은 2~20자 사이로 입력해주세요."):e.nickname="닉네임을 입력해주세요.",y.gender||(e.gender="성별을 선택해주세요."),y.address||(e.address="주소를 입력해주세요."),y.mbti||(e.mbti="MBTI를 선택해주세요."),z&&(y.currentPassword||(e.currentPassword="현재 비밀번호를 입력해주세요."),y.newPassword&&(y.newPassword.length<6?e.newPassword="새 비밀번호는 최소 6자 이상이어야 합니다.":y.newPassword!==y.confirmPassword&&(e.confirmPassword="새 비밀번호와 확인 비밀번호가 일치하지 않습니다."))),k(e),0===Object.keys(e).length})()){S(!0),q("");try{await new Promise(e=>setTimeout(e,1e3));let e=null;if(z&&y.newPassword){const{hash:s}=await a(y.newPassword);e=s}const s={id:w.id,email:y.email,name:y.name,isAdmin:w.isAdmin},r="updated_access_token_"+Date.now(),t="updated_refresh_token_"+Date.now();await f(s,r,t),q("회원정보가 성공적으로 수정되었습니다!"),z&&(b(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),A(!1))}catch(s){k({email:"회원정보 수정에 실패했습니다. 다시 시도해주세요."})}finally{S(!1)}}},className:"space-y-6",children:[I&&s.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:I})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(t,{className:"text-sm font-medium text-gray-900 dark:text-white",children:"프로필 이미지"}),s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsxs(x,{className:"w-24 h-24",children:[s.jsx(h,{src:F||"/placeholder.svg"}),s.jsx(u,{children:s.jsx(i,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})]}),s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){b(e=>({...e,profileImage:a}));const e=new FileReader;e.onload=e=>{var s;return _(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(a)}},className:"hidden"}),s.jsx(l,{type:"button",variant:"outline",size:"sm",children:"이미지 변경"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(n,{label:"이메일",type:"email",value:y.email,onChange:e=>D("email",e.target.value),error:N.email,required:!0,placeholder:"example@email.com"}),s.jsx(n,{label:"이름",value:y.name,onChange:e=>D("name",e.target.value),error:N.name,required:!0,placeholder:"이름을 입력하세요"})]}),s.jsx(n,{label:"닉네임",value:y.nickname,onChange:e=>D("nickname",e.target.value),error:N.nickname,required:!0,placeholder:"닉네임을 입력하세요"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(t,{className:"text-sm font-medium text-gray-900 dark:text-white",children:["성별 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(d,{value:y.gender,onValueChange:e=>D("gender",e),className:"flex space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{value:"M",id:"male"}),s.jsx(t,{htmlFor:"male",className:"text-gray-900 dark:text-white",children:"남성"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{value:"F",id:"female"}),s.jsx(t,{htmlFor:"female",className:"text-gray-900 dark:text-white",children:"여성"})]})]}),N.gender&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N.gender})]}),s.jsx(n,{label:"주소",value:y.address,onChange:e=>D("address",e.target.value),placeholder:"주소를 입력해주세요",error:N.address,required:!0}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(t,{className:"text-sm font-medium text-gray-900 dark:text-white",children:["MBTI ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(c,{value:y.mbti,onChange:e=>D("mbti",e)}),N.mbti&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N.mbti})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"비밀번호 변경"}),s.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>A(!z),children:z?"취소":"비밀번호 변경"})]}),z&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(n,{label:"현재 비밀번호",type:"password",value:y.currentPassword,onChange:e=>D("currentPassword",e.target.value),error:N.currentPassword,placeholder:"현재 비밀번호를 입력하세요"}),s.jsx(n,{label:"새 비밀번호",type:"password",value:y.newPassword,onChange:e=>D("newPassword",e.target.value),error:N.newPassword,placeholder:"새 비밀번호를 입력하세요"}),s.jsx(n,{label:"새 비밀번호 확인",type:"password",value:y.confirmPassword,onChange:e=>D("confirmPassword",e.target.value),error:N.confirmPassword,placeholder:"새 비밀번호를 다시 입력하세요"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-6",children:[s.jsx(l,{type:"submit",className:"flex-1",size:"lg",disabled:M,children:M?s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4 mr-2 animate-spin"}),"저장 중..."]}):s.jsxs(s.Fragment,{children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"저장"]})}),s.jsx(l,{type:"button",variant:"outline",size:"lg",onClick:L,children:"취소"})]})]})]}):s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"로그인이 필요합니다."})})}const y=()=>s.jsx(w,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"회원정보 수정"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"개인정보를 안전하게 관리하고 업데이트할 수 있습니다."})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:s.jsx(f,{})})]})})});export{y as default};
